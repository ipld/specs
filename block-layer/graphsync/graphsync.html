<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Graphsync | IPLD Specifications</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Specifications for the Inter-planetary Linked Data project">
    
    <link rel="preload" href="/assets/css/0.styles.1c4fef16.css" as="style"><link rel="preload" href="/assets/js/app.d260aa76.js" as="script"><link rel="preload" href="/assets/js/2.dee7ed4c.js" as="script"><link rel="preload" href="/assets/js/21.46ed4f1d.js" as="script"><link rel="prefetch" href="/assets/js/10.b93170a5.js"><link rel="prefetch" href="/assets/js/11.9a3b470d.js"><link rel="prefetch" href="/assets/js/12.cdd7f2e5.js"><link rel="prefetch" href="/assets/js/13.f1c74105.js"><link rel="prefetch" href="/assets/js/14.5fba90d7.js"><link rel="prefetch" href="/assets/js/15.d075abad.js"><link rel="prefetch" href="/assets/js/16.0c2bf88b.js"><link rel="prefetch" href="/assets/js/17.c0445d96.js"><link rel="prefetch" href="/assets/js/18.e7ebfc2c.js"><link rel="prefetch" href="/assets/js/19.afec9d1c.js"><link rel="prefetch" href="/assets/js/20.7667865d.js"><link rel="prefetch" href="/assets/js/22.6c914b07.js"><link rel="prefetch" href="/assets/js/23.9ce655f6.js"><link rel="prefetch" href="/assets/js/24.d7fd2d2e.js"><link rel="prefetch" href="/assets/js/25.065c6d4e.js"><link rel="prefetch" href="/assets/js/26.df4fa512.js"><link rel="prefetch" href="/assets/js/27.48d1f812.js"><link rel="prefetch" href="/assets/js/28.7fba2ad3.js"><link rel="prefetch" href="/assets/js/29.d2954fe9.js"><link rel="prefetch" href="/assets/js/3.039f34ed.js"><link rel="prefetch" href="/assets/js/30.75e498cf.js"><link rel="prefetch" href="/assets/js/31.9e5b4c1e.js"><link rel="prefetch" href="/assets/js/32.4da5f3b8.js"><link rel="prefetch" href="/assets/js/33.4052b341.js"><link rel="prefetch" href="/assets/js/34.bd21d744.js"><link rel="prefetch" href="/assets/js/35.cabbe245.js"><link rel="prefetch" href="/assets/js/36.57f5dc15.js"><link rel="prefetch" href="/assets/js/37.0194e0b7.js"><link rel="prefetch" href="/assets/js/38.c6e889a7.js"><link rel="prefetch" href="/assets/js/39.6808d74e.js"><link rel="prefetch" href="/assets/js/4.fac9939a.js"><link rel="prefetch" href="/assets/js/40.81a3e1c1.js"><link rel="prefetch" href="/assets/js/41.07f98ace.js"><link rel="prefetch" href="/assets/js/42.b9b1fc27.js"><link rel="prefetch" href="/assets/js/43.339e3f8d.js"><link rel="prefetch" href="/assets/js/44.89c6200f.js"><link rel="prefetch" href="/assets/js/45.2e09e527.js"><link rel="prefetch" href="/assets/js/46.bd3e235b.js"><link rel="prefetch" href="/assets/js/47.0160ab07.js"><link rel="prefetch" href="/assets/js/48.1ed58eab.js"><link rel="prefetch" href="/assets/js/49.7d225384.js"><link rel="prefetch" href="/assets/js/5.5c92d69b.js"><link rel="prefetch" href="/assets/js/50.f57d497c.js"><link rel="prefetch" href="/assets/js/51.afed4385.js"><link rel="prefetch" href="/assets/js/52.08040c00.js"><link rel="prefetch" href="/assets/js/53.46db6a67.js"><link rel="prefetch" href="/assets/js/54.c6460908.js"><link rel="prefetch" href="/assets/js/55.13961a23.js"><link rel="prefetch" href="/assets/js/56.6848a552.js"><link rel="prefetch" href="/assets/js/57.be7ff850.js"><link rel="prefetch" href="/assets/js/58.f0743f1c.js"><link rel="prefetch" href="/assets/js/59.b1949fc2.js"><link rel="prefetch" href="/assets/js/6.7cf616ff.js"><link rel="prefetch" href="/assets/js/60.be5d6ff3.js"><link rel="prefetch" href="/assets/js/61.afeefe4d.js"><link rel="prefetch" href="/assets/js/62.1a423254.js"><link rel="prefetch" href="/assets/js/63.e3e89c04.js"><link rel="prefetch" href="/assets/js/64.d22f94bb.js"><link rel="prefetch" href="/assets/js/65.e4ba1690.js"><link rel="prefetch" href="/assets/js/66.84525878.js"><link rel="prefetch" href="/assets/js/67.dfcf8d66.js"><link rel="prefetch" href="/assets/js/68.adf1720b.js"><link rel="prefetch" href="/assets/js/69.db09b6d2.js"><link rel="prefetch" href="/assets/js/7.a89a63cb.js"><link rel="prefetch" href="/assets/js/70.729b1b31.js"><link rel="prefetch" href="/assets/js/71.e810f6c3.js"><link rel="prefetch" href="/assets/js/72.9d3f942d.js"><link rel="prefetch" href="/assets/js/73.5f26241f.js"><link rel="prefetch" href="/assets/js/74.de610e17.js"><link rel="prefetch" href="/assets/js/75.822262d6.js"><link rel="prefetch" href="/assets/js/76.8a4ca9fd.js"><link rel="prefetch" href="/assets/js/77.c04a1a10.js"><link rel="prefetch" href="/assets/js/78.fd127fb7.js"><link rel="prefetch" href="/assets/js/79.76390086.js"><link rel="prefetch" href="/assets/js/8.aad8b89c.js"><link rel="prefetch" href="/assets/js/80.9907f42b.js"><link rel="prefetch" href="/assets/js/81.21b8960c.js"><link rel="prefetch" href="/assets/js/82.ceb7cc59.js"><link rel="prefetch" href="/assets/js/83.28615ea4.js"><link rel="prefetch" href="/assets/js/84.d159db8a.js"><link rel="prefetch" href="/assets/js/85.d6658ed7.js"><link rel="prefetch" href="/assets/js/86.b9154b99.js"><link rel="prefetch" href="/assets/js/87.73e80104.js"><link rel="prefetch" href="/assets/js/88.68b959e0.js"><link rel="prefetch" href="/assets/js/89.a907a876.js"><link rel="prefetch" href="/assets/js/9.13d8e553.js"><link rel="prefetch" href="/assets/js/90.4fddc516.js"><link rel="prefetch" href="/assets/js/91.761a8273.js"><link rel="prefetch" href="/assets/js/92.69361fef.js"><link rel="prefetch" href="/assets/js/93.cef894df.js"><link rel="prefetch" href="/assets/js/94.badda16d.js"><link rel="prefetch" href="/assets/js/95.81919550.js"><link rel="prefetch" href="/assets/js/96.16a93c57.js"><link rel="prefetch" href="/assets/js/97.3b54855e.js"><link rel="prefetch" href="/assets/js/98.a7e14ba9.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1c4fef16.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">IPLD Specifications</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/schemas/" class="nav-link">
  IPLD Schemas
</a></div> <a href="https://github.com/ipld/specs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/schemas/" class="nav-link">
  IPLD Schemas
</a></div> <a href="https://github.com/ipld/specs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Graphsync</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/block-layer/graphsync/graphsync.html#meta-status-of-this-doc" class="sidebar-link">[Meta: Status of this doc]</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/block-layer/graphsync/graphsync.html#concepts-and-glossary" class="sidebar-link">Concepts and Glossary</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/block-layer/graphsync/graphsync.html#interfaces" class="sidebar-link">Interfaces</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/block-layer/graphsync/graphsync.html#network-messages" class="sidebar-link">Network Messages</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/block-layer/graphsync/graphsync.html#extensions" class="sidebar-link">Extensions</a></li><li class="sidebar-sub-header"><a href="/block-layer/graphsync/graphsync.html#updating-requests" class="sidebar-link">Updating requests</a></li><li class="sidebar-sub-header"><a href="/block-layer/graphsync/graphsync.html#response-status-codes" class="sidebar-link">Response Status Codes</a></li></ul></li><li><a href="/block-layer/graphsync/graphsync.html#example-use-cases" class="sidebar-link">Example Use Cases</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/block-layer/graphsync/graphsync.html#syncing-a-blockchain" class="sidebar-link">Syncing a Blockchain</a></li><li class="sidebar-sub-header"><a href="/block-layer/graphsync/graphsync.html#downloading-package-dependencies" class="sidebar-link">Downloading Package Dependencies</a></li><li class="sidebar-sub-header"><a href="/block-layer/graphsync/graphsync.html#loading-content-from-deep-within-a-giant-dataset" class="sidebar-link">Loading content from deep within a giant dataset</a></li><li class="sidebar-sub-header"><a href="/block-layer/graphsync/graphsync.html#loading-a-large-video-optimizing-for-playback-and-seek" class="sidebar-link">Loading a large video optimizing for playback and seek</a></li><li class="sidebar-sub-header"><a href="/block-layer/graphsync/graphsync.html#looking-up-an-entry-in-a-sharded-directory" class="sidebar-link">Looking up an entry in a sharded directory</a></li></ul></li><li><a href="/block-layer/graphsync/graphsync.html#other-notes" class="sidebar-link">Other notes</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="graphsync"><a href="#graphsync" class="header-anchor">#</a> Graphsync</h1> <p><strong>Status: Prescriptive - Draft</strong></p> <p>A protocol to synchronize graphs across peers.</p> <p>See also <a href="/block-layer/IPLD.html">ipld</a>, <a href="/selectors/selectors.html">IPLD Selectors</a></p> <h2 id="meta-status-of-this-doc"><a href="#meta-status-of-this-doc" class="header-anchor">#</a> [Meta: Status of this doc]</h2> <ul><li>This was written around 2018-10-16 (<a href="https://drive.google.com/file/d/1NbbVxZQFKXwW6mdodxgTaftsI8eID-c1/view" target="_blank" rel="noopener noreferrer">video presentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</li> <li>This document is unfortunately far from complete. ðŸ˜¦ I want to finish this by EOQ.</li> <li>But this document provides enough information for an implementation to be made by someone who has already implemented bitswap (or understands it well).</li> <li>It relies heavily on an understanding of bitswap as it is now. It likely won't be useful to people without a good understanding of how Bitswap works at the moment.</li> <li>This requires IPLD Selectors to exist and be implemented.</li></ul> <h2 id="concepts-and-glossary"><a href="#concepts-and-glossary" class="header-anchor">#</a> Concepts and Glossary</h2> <ul><li><code>peer</code> - a program or process participating in the graphsync protocol. It can connect to other peers.</li> <li><code>graph</code> - an authenticated directed acyclic graph (DAG) of content. an IPLD dag. consists of nodes with hash (content addressed, authenticated) links to other nodes. ($$ G $$)</li> <li><code>dag</code> - a directed acyclic graph. For our purposes, our DAGs are all IPLD (connected by hash links, authenticated, content addressed, etc.)</li> <li><code>selector</code> - an expression that identifies a specific subset of a graph.  ($$ S(G) \subset G $$)</li> <li><code>selector language</code> - the language defining a family of selectors</li> <li><code>request</code> - a request for content from one <code>peer</code> to another. This is similar to HTTP, RPC, or API requests.</li> <li><code>response</code> - the content sent from <code>responder</code> to <code>requester</code> fulfilling a <code>request</code>.</li> <li><code>requester</code> - the peer which initiates a <code>request</code> (wants content).</li> <li><code>responder</code> - the peer receiving a <code>request</code>, and providing content in a <code>response</code> (provides content).</li> <li><code>request process</code> - a request and its fulfillment is a sub-process, a procedure call across peers with the following phases (at a high level):
<ul><li>(1) The <code>requester</code> initiates by sending a request message (<code>req</code>) to the <code>responder</code>, specifying desired content and other request parameters.</li> <li>(2) Upon receiving a request message, the <code>responder</code> adds the request to a set of active requests, and starts processing it.</li> <li>(3) The <code>responder</code> fulfills the request by sending content to the <code>requester</code> (the <code>response</code>) .</li> <li>(4) The <code>responder</code> and <code>requester</code> can terminate the request process at any time.</li> <li>Notes:
<ul><li>We are explicitly avoiding the <code>client-server</code> terminology to make it clear that <code>requester</code> and <code>responder</code> are &quot;roles&quot; that any peer might play, and to avoid failing in the two-sided client-server model of the web..</li> <li><code>requests</code> may be short or long-lived -- requests may be as short as microseconds or last indefinitely.</li></ul></li></ul></li> <li><code>priority</code> - a numeric label associated with a <code>request</code> implying the relative ordering of importance for requests. This is a <code>requester's</code> way of expressing to a <code>responder</code> the order in which the <code>requester</code> wishes the <code>requests</code> to be fulfilled. The <code>responder</code> SHOULD respect <code>priority</code>, though may return <code>responses</code> in any order.</li></ul> <h2 id="interfaces"><a href="#interfaces" class="header-anchor">#</a> Interfaces</h2> <p>This is a listing of the data structures and process interfaces involved in the graphsync protocol. For simplicity, we use Go type notation, though of course graphsync is language agnostic.</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">type</span> Graphsync <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Request</span><span class="token punctuation">(</span>req	Request<span class="token punctuation">)</span> <span class="token punctuation">(</span>Response<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Request <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    Selector Selector
    Priority Priority      <span class="token comment">// optional</span>
    Expires  time<span class="token punctuation">.</span>Duration <span class="token comment">// optional</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> GraphSyncNet <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">SendMessage</span><span class="token punctuation">(</span>m Message<span class="token punctuation">)</span>
    <span class="token function">RecvMessage</span><span class="token punctuation">(</span>m Message<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="network-messages"><a href="#network-messages" class="header-anchor">#</a> Network Messages</h2> <div class="language-protobuf extra-class"><pre class="language-protobuf"><code><span class="token keyword">message</span> <span class="token class-name">GraphsyncMessage</span> <span class="token punctuation">{</span>

  <span class="token keyword">message</span> <span class="token class-name">Request</span> <span class="token punctuation">{</span>
    <span class="token builtin">int32</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>       <span class="token comment">// unique id set on the requester side</span>
    <span class="token builtin">bytes</span> root <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>     <span class="token comment">// a CID for the root node in the query</span>
    <span class="token builtin">bytes</span> selector <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// ipld selector to retrieve</span>
    <span class="token map class-name">map<span class="token punctuation">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">bytes</span><span class="token punctuation">&gt;</span></span> extensions <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// side channel information</span>
    <span class="token builtin">int32</span> priority <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>	<span class="token comment">// the priority (normalized). default to 1</span>
    <span class="token builtin">bool</span>  cancel <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>   <span class="token comment">// whether this cancels a request</span>
    <span class="token builtin">bool</span>  update <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>   <span class="token comment">// whether this is an update to an in progress request</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">message</span> <span class="token class-name">Response</span> <span class="token punctuation">{</span>
    <span class="token builtin">int32</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>     <span class="token comment">// the request id</span>
    <span class="token builtin">int32</span> status <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// a status code.</span>
    <span class="token map class-name">map<span class="token punctuation">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">bytes</span><span class="token punctuation">&gt;</span></span> extensions <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>    <span class="token comment">// side channel information</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">message</span> <span class="token class-name">Block</span> <span class="token punctuation">{</span>
  	<span class="token builtin">bytes</span> prefix <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// CID prefix (cid version, multicodec and multihash prefix (type + length)</span>
  	<span class="token builtin">bytes</span> data <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// the actual data included in this message</span>
  <span class="token builtin">bool</span> completeRequestList    <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// This request list includes *all* requests, replacing outstanding requests.</span>
  <span class="token keyword">repeated</span> <span class="token positional-class-name class-name">Request</span>  requests  <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// The list of requests.</span>
  <span class="token keyword">repeated</span> <span class="token positional-class-name class-name">Response</span> responses <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token comment">// The list of responses.</span>
  <span class="token keyword">repeated</span> <span class="token positional-class-name class-name">Block</span>    data      <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span> <span class="token comment">// Blocks related to the responses</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="extensions"><a href="#extensions" class="header-anchor">#</a> Extensions</h3> <p>The Graphsync protocol is extensible. A graphsync request and a graphsync response contain an <code>extensions</code> field, which is a map type. Each key of the extensions field specifies the name of the extension, while the value is data (serialized as bytes) relevant to that extension.</p> <p>Extensions help make Graphsync operate more efficiently, or provide a mechanism for exchanging side channel information for other protocols. An implementation can choose to support one or more extensions, but it does not have to.</p> <p>A list of well known extensions is found <a href="/block-layer/graphsync/known_extensions.html">here</a></p> <h3 id="updating-requests"><a href="#updating-requests" class="header-anchor">#</a> Updating requests</h3> <p>A client may send an updated version of a request.</p> <p>An update contains ONLY extension data, which the responder can use to modify an in progress request. For example, if a responder supports the Do Not Send CIDs extension, it could choose to also accept an update to this list and ignore CIDs encountered later. It is not possible to modify the original root and selector of a request through this mechanism. If this is what is needed, you should cancel the request and send a new one.</p> <p>The update mechanism in conjunction with the paused response code can also be used to support incremental payment protocols.</p> <h3 id="response-status-codes"><a href="#response-status-codes" class="header-anchor">#</a> Response Status Codes</h3> <div class="language- extra-class"><pre class="language-text"><code># info - partial
10   Request Acknowledged. Working on it.
11   Additional Peers. PeerIDs in extra.
12   Not enough vespene gas ($)
13   Other Protocol - info in extra.
14   Partial Response w/ metadata, may include blocks
15   Request Paused, pending update, see extensions for info

# success - terminal
20   Request Completed, full content.
21   Request Completed, partial content.

# error - terminal
30   Request Rejected. NOT working on it.
31   Request failed, busy, try again later (getting dosed. backoff in extra).
32   Request failed, for unknown reason. Extra may have more info.
33   Request failed, for legal reasons.
34   Request failed, content not found.
</code></pre></div><h2 id="example-use-cases"><a href="#example-use-cases" class="header-anchor">#</a> Example Use Cases</h2> <h3 id="syncing-a-blockchain"><a href="#syncing-a-blockchain" class="header-anchor">#</a> Syncing a Blockchain</h3> <p>Requests we would like to make for this:</p> <ul><li>Give me <code>&lt;hash&gt;/Parent</code>, <code>&lt;hash&gt;/Parent/Parent</code> and so on, up to a depth of <code>N</code>.</li> <li>Give me nodes that exist in <code>&lt;hash1&gt;</code> but not <code>&lt;hash2&gt;</code> <ul><li>In addition to this, the ability to say &quot;Give me some range of (the above query) is very important&quot;. For example: &quot;Give me the second 1/3 of the nodes that are children of <code>&lt;hash1&gt;</code> but not <code>&lt;hash2&gt;</code>&quot;</li></ul></li></ul> <h3 id="downloading-package-dependencies"><a href="#downloading-package-dependencies" class="header-anchor">#</a> Downloading Package Dependencies</h3> <ul><li>Give me everything within <code>&lt;hash&gt;/foo/v1.0.0</code></li></ul> <h3 id="loading-content-from-deep-within-a-giant-dataset"><a href="#loading-content-from-deep-within-a-giant-dataset" class="header-anchor">#</a> Loading content from deep within a giant dataset</h3> <ul><li>Give me the nodes for the path <code>&lt;hash&gt;/a/b/c/d/e/f/g</code></li></ul> <h3 id="loading-a-large-video-optimizing-for-playback-and-seek"><a href="#loading-a-large-video-optimizing-for-playback-and-seek" class="header-anchor">#</a> Loading a large video optimizing for playback and seek</h3> <ul><li>First, give me the first few data blocks <code>&lt;hash&gt;/data/*</code></li> <li>Second, give me all of the tree except for leaves <code>&lt;hash&gt;/**/!</code></li> <li>Third, give me everything else. <code>&lt;hash&gt;/**/*</code></li></ul> <h3 id="looking-up-an-entry-in-a-sharded-directory"><a href="#looking-up-an-entry-in-a-sharded-directory" class="header-anchor">#</a> Looking up an entry in a sharded directory</h3> <p>Given a directory entry I think <em>might</em> exist in a sharded directory, I should be able to specify the speculative hamt path for that item, and get back as much of that path that exists. For example:</p> <p>&quot;Give me <code>&lt;shardhash&gt;/AB/F5/3E/B7/11/C3/B9</code>&quot;</p> <p>And if the item I want is actually just at <code>/AB/F5/3E</code>, I should get that back.</p> <h2 id="other-notes"><a href="#other-notes" class="header-anchor">#</a> Other notes</h2> <p><strong>Cost to the responder.</strong> The graphsync protocol will require a non-zero additional overhead of CPU and memory. This cost must be very clearly articulated, and accounted for, otherwise we will end up opening ugly DoS vectors</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ipld/specs/edit/master/block-layer/graphsync/graphsync.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4/11/2021, 12:06:37 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d260aa76.js" defer></script><script src="/assets/js/2.dee7ed4c.js" defer></script><script src="/assets/js/21.46ed4f1d.js" defer></script>
  </body>
</html>
